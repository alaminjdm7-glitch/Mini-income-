<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick Earn</title>

<script src="//libtl.com/sdk.js" data-zone="10314131" data-sdk="show_10314131"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f2f2f7}
.container{max-width:420px;margin:auto;padding:10px}
.card{background:#fff;padding:15px;border-radius:12px;margin-bottom:12px}
button{width:100%;padding:12px;background:#4E73DF;color:#fff;border:none;border-radius:8px;font-weight:bold}
input,select{width:100%;padding:10px;margin-top:8px}
.nav{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;justify-content:space-around;padding:10px;border-top:1px solid #ccc}
.nav div{font-weight:bold}
.hide{display:none}
.task{margin-top:8px}
</style>
</head>

<body>

<!-- USER HEADER -->
<div style="background:#1a1a1a;color:#fff;text-align:center;padding:10px;position:sticky;top:0;z-index:999">
  ЁЯСд <b id="uName"></b><br>
  ЁЯЖФ <span id="uId"></span>
</div>

<div class="container">

<!-- DASHBOARD -->
<div class="card">
<h3>ЁЯУв Notice</h3>
<p>ржПржЯрж╛ ржЖржорж╛ржжрзЗрж░ ржЕржлрж┐рж╕рзЗрж░ ржЗржиржХрж╛ржо рж╕рж╛ржЗржЯред ржПржЦрж╛ржи ржерзЗржХрзЗ ржЙрж░рж╛ржзрзБрж░рж╛ ржЗржиржХрж╛ржо ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред</p>
<p>ЁЯТ░ Balance: рз│ <b id="bal">0</b></p>
<p>ЁЯУ║ Ads Today: <b id="adCount">0</b>/30</p>
</div>

<!-- TASKS -->
<div class="card">
<h3>ЁЯз╛ Tasks</h3>

<div class="task">
<button onclick="joinChannel('https://t.me/DevleparX_Namid')">Join Channel 1 (+5)</button>
</div>
<div class="task">
<button onclick="joinChannel('https://t.me/GmailMarketingB')">Join Channel 2 (+5)</button>
</div>
<div class="task">
<button onclick="joinChannel('https://t.me/BDIncomep')">Join Channel 3 (+5)</button>
</div>

<div class="task">
<button onclick="viewTask()">View Task / Ad</button>
</div>

<div class="task">
<button onclick="watchAd()">Watch Ad (+5)</button>
</div>
</div>

<!-- WITHDRAW -->
<div class="card">
<h3>ЁЯТ╕ Withdraw</h3>
<form onsubmit="event.preventDefault();withdraw();">
<input type="number" id="wAmount" placeholder="Amount (Min 500)">
<input type="text" id="wNumber" placeholder="Bkash / Nagad Number">
<select id="wMethod">
<option>Bkash</option>
<option>Nagad</option>
<option>Rocket</option>
</select>
<button>Withdraw</button>
</form>
</div>

<!-- HISTORY -->
<div class="card">
<h3>ЁЯУЬ Withdraw History</h3>
<div id="history"></div>
</div>

</div>

<div class="nav">
<div>Home</div>
<div>Tasks</div>
<div>Withdraw</div>
<div>Profile</div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

const BOT_TOKEN = "8547106742:AAGzYH6K6dDFR3lB4RdDcCRpZ_VBmlPCkuw";
const ADMIN_ID = "8188773875";

let user = tg.initDataUnsafe.user || {};
let uid = user.id || Date.now();
let uname = user.first_name || "Guest";

uName.innerText = uname;
uId.innerText = uid;

let balance = Number(localStorage.getItem("bal_"+uid) || 0);
let ads = JSON.parse(localStorage.getItem("ads_"+uid) || '{"c":0,"t":0}');
let history = JSON.parse(localStorage.getItem("his_"+uid) || "[]");

function ui(){
  bal.innerText = balance;
  adCount.innerText = ads.c;
}
ui();

function joinChannel(link){
  window.open(link,"_blank");
  balance += 5;
  save();
  alert("тЬЕ 5 ржЯрж╛ржХрж╛ ржпрзЛржЧ рж╣ржпрж╝рзЗржЫрзЗ");
}

function viewTask(){
  if(!localStorage.getItem("viewed_"+uid)){
    localStorage.setItem("viewed_"+uid,"1");
    window.open("https://t.me/GmailMarketing_99bot","_blank");
  } else {
    showAd();
  }
}

function watchAd(){
  showAd();
}

function showAd(){
  if(Date.now()-ads.t > 86400000){
    ads={c:0,t:Date.now()};
  }
  if(ads.c>=30){
    alert("ржжрзБржГржЦрж┐ржд ржЖржкржирж┐ рзйрзж ржЯрж┐ ржЕрзНржпрж╛ржб ржжрзЗржЦрзЗржЫрзЗржиред рзирзк ржШржирзНржЯрж╛ ржкрж░ ржЖржмрж╛рж░ ржкрж╛рж░ржмрзЗржиред");
    return;
  }
  show_10314131('pop').then(()=>{
    ads.c++;
    ads.t=Date.now();
    balance+=5;
    save();
    alert("тЬЕ 5 ржЯрж╛ржХрж╛ ржпрзЛржЧ рж╣ржпрж╝рзЗржЫрзЗ");
  });
}

function withdraw(){
  let a=Number(wAmount.value);
  if(balance<500 || a<500){
    alert("ржЖржкржирж╛рж░ рзлрзжрзж ржЯрж╛ржХрж╛ ржмрзНржпрж╛рж▓рзЗржирзНрж╕ рж╣ржпрж╝ржирж┐");
    return;
  }
  balance-=a;
  let obj={a, n:wNumber.value, m:wMethod.value, d:new Date().toLocaleString()};
  history.push(obj);
  save();
  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      chat_id:ADMIN_ID,
      text:`ЁЯУв New Withdraw Request\n\nЁЯСд Name: ${uname}\nЁЯЖФ ID: ${uid}\nЁЯТ╡ Amount: рз│${a}\nЁЯУ▒ Number: ${obj.n}\nЁЯТ│ Method: ${obj.m}`
    })
  });
  alert("тЬЕ Withdraw Request Submitted");
}

function save(){
  localStorage.setItem("bal_"+uid,balance);
  localStorage.setItem("ads_"+uid,JSON.stringify(ads));
  localStorage.setItem("his_"+uid,JSON.stringify(history));
  ui();loadHistory();
}

function loadHistory(){
  historyDiv=history.map(h=>`<p>рз│${h.a} - ${h.m}<br>${h.d}</p>`).join("");
  history.innerHTML=historyDiv||"No history";
}
loadHistory();
</script>
</body>
</html>
