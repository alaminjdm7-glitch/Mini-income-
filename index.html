<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Earning App</title>

<!-- AD NETWORK -->
<script src="//libtl.com/sdk.js" data-zone="10314131" data-sdk="show_10314131"></script>

<style>
body{
    margin:0;
    font-family:Arial,sans-serif;
    background:#0f0f0f;
    color:#fff;
}
.page{
    display:none;
    padding:20px;
}
.page.active{
    display:block;
}
.notice{
    background:#1c1c1c;
    padding:12px;
    border-radius:8px;
    margin-bottom:15px;
    color:#ffcc00;
    font-size:14px;
}
h1,h2{
    margin-top:5px;
}
button{
    width:100%;
    padding:12px;
    font-size:16px;
    border:none;
    border-radius:8px;
    background:#ff3c3c;
    color:#fff;
    margin-top:15px;
}
input,select{
    width:100%;
    padding:10px;
    background:#1c1c1c;
    border:1px solid #333;
    color:#fff;
    border-radius:6px;
    margin-top:12px;
}
.nav{
    position:fixed;
    bottom:0;
    width:100%;
    background:#111;
    display:flex;
    justify-content:space-around;
    padding:10px 0;
    border-top:1px solid #333;
}
.nav-item{
    color:#aaa;
    font-size:14px;
    cursor:pointer;
}
.nav-item.active{
    color:#00ff99;
}
</style>
</head>

<body>

<!-- HOME -->
<div class="page active" id="home-page">
    <div class="notice">
        ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶´‡¶ø‡¶∏‡ßá‡¶∞ ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶á‡¶ü‡•§ ‡¶è‡¶ñ‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶â‡¶∞‡¶æ‡¶ß‡ßÅ‡¶∞‡¶æ ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
    </div>

    <h2>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</h2>
    <h1><span id="balance">0.00</span> ‡¶ü‡¶æ‡¶ï‡¶æ</h1>

    <button id="start-earning">‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    <button id="withdraw-btn" style="background:#00cc66;">Withdraw</button>
</div>

<!-- EARN -->
<div class="page" id="earn-page">
    <h2>Ad ‡¶¶‡ßá‡¶ñ‡ßá ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
    <p>‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü: <b id="daily-limit">30</b></p>
    <p>‡¶¶‡ßá‡¶ñ‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: <b id="today-ads">0</b></p>

    <button id="watch-ad">Ad ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (+10 ‡¶ü‡¶æ‡¶ï‡¶æ)</button>
</div>

<!-- WITHDRAW -->
<div class="page" id="withdraw-page">
    <h2>Withdraw</h2>

    <form id="withdraw-form">
        <select id="withdraw-method">
            <option>Bkash</option>
            <option>Nagad</option>
            <option>Rocket</option>
        </select>

        <input type="number" placeholder="Number" required>
        <input type="number" id="withdraw-amount" placeholder="Minimum 500" required>

        <button type="submit" style="background:#00cc66;">Submit</button>
    </form>
</div>

<!-- PROFILE -->
<div class="page" id="profile-page">
    <h2>Profile</h2>
    <p>Name: <b id="profile-name"></b></p>
    <p>Balance: <b><span id="profile-balance">0.00</span> ‡¶ü‡¶æ‡¶ï‡¶æ</b></p>
    <p>Ads Watched: <b id="profile-ads-watched">0</b></p>
</div>

<!-- NAV -->
<div class="nav">
    <div class="nav-item active" data-page="home-page">Home</div>
    <div class="nav-item" data-page="earn-page">Earn</div>
    <div class="nav-item" data-page="withdraw-page">Withdraw</div>
    <div class="nav-item" data-page="profile-page">Profile</div>
</div>

<script>
const tg = window.Telegram?.WebApp;

/* CONFIG */
const AD_REWARD = 10;
const DAILY_LIMIT = 30;
const MIN_WITHDRAW = 500;

/* STORAGE */
function load(k,d){return localStorage.getItem(k)?JSON.parse(localStorage.getItem(k)):d;}
function save(k,v){localStorage.setItem(k,JSON.stringify(v));}

/* DATA */
let balance = load("balance",0);
let adsWatched = load("adsWatched",0);

/* UI */
function updateUI(){
    document.getElementById("balance").innerText = balance.toFixed(2);
    document.getElementById("profile-balance").innerText = balance.toFixed(2);
    document.getElementById("today-ads").innerText = adsWatched;
    document.getElementById("profile-ads-watched").innerText = adsWatched;
    document.getElementById("profile-name").innerText =
        tg?.initDataUnsafe?.user?.first_name || "User";
}
updateUI();

/* NAV */
document.querySelectorAll(".nav-item").forEach(btn=>{
    btn.onclick=()=>{
        document.querySelectorAll(".nav-item").forEach(n=>n.classList.remove("active"));
        btn.classList.add("active");
        document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
        document.getElementById(btn.dataset.page).classList.add("active");
    }
});

/* SHORTCUTS */
document.getElementById("start-earning").onclick=()=>{
    document.querySelector('[data-page="earn-page"]').click();
};
document.getElementById("withdraw-btn").onclick=()=>{
    document.querySelector('[data-page="withdraw-page"]').click();
};

/* WATCH AD */
document.getElementById("watch-ad").onclick=()=>{
    if(adsWatched>=DAILY_LIMIT){
        tg?.showAlert("‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑");
        return;
    }
    show_10314131("pop").then(()=>{
        adsWatched++;
        balance+=AD_REWARD;
        save("adsWatched",adsWatched);
        save("balance",balance);
        updateUI();
        tg?.showAlert("üéâ 10 ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá");
    }).catch(()=>{
        tg?.showAlert("Ad ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø");
    });
};

/* WITHDRAW */
document.getElementById("withdraw-form").onsubmit=e=>{
    e.preventDefault();
    let amount=Number(document.getElementById("withdraw-amount").value);
    if(amount<MIN_WITHDRAW){
        tg?.showAlert("Minimum withdraw 500 ‡¶ü‡¶æ‡¶ï‡¶æ");
        return;
    }
    if(amount>balance){
        tg?.showAlert("‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ï‡¶Æ");
        return;
    }
    balance-=amount;
    save("balance",balance);
    updateUI();
    tg?.showAlert("Withdraw request ‡¶∏‡¶´‡¶≤");
    e.target.reset();
};
</script>

</body>
</html>
