
<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Earning App</title>

<!-- AD NETWORK -->
<script src="//libtl.com/sdk.js" data-zone="10314131" data-sdk="show_10314131"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:#fff}
.page{display:none;padding:20px}
.page.active{display:block}
.nav{position:fixed;bottom:0;width:100%;background:#111;display:flex;justify-content:space-around;padding:10px 0;border-top:1px solid #333}
.nav-item{color:#aaa;font-size:14px;cursor:pointer}
.nav-item.active{color:#00ff99}
button{width:100%;padding:12px;font-size:16px;border:none;border-radius:8px;background:#ff3c3c;color:white;margin-top:12px}
input,select{width:100%;padding:10px;background:#1c1c1c;border:1px solid #333;color:#fff;border-radius:6px;margin-top:10px}
.notice{background:#1c1c1c;padding:10px;border-radius:6px;margin-bottom:10px;color:#00ff99}
.card{background:#161616;padding:15px;border-radius:10px;margin-bottom:15px}
</style>
</head>

<body>

<!-- HOME -->
<div class="page active" id="home">
<h2>üìä Dashboard</h2>
<div class="notice">‡¶è‡¶ü‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶Ö‡¶´‡¶ø‡¶∏‡ßá‡¶∞ ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶∏‡¶æ‡¶á‡¶ü‡•§ ‡¶è‡¶ñ‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶â‡¶∞‡¶æ‡¶ß‡ßÅ‡¶∞‡¶æ ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>
<p>üë§ <b id="uName"></b></p>
<p>üÜî <b id="uId"></b></p>
<h1>Balance: ‡ß≥<span id="balance">0</span></h1>
<button onclick="go('earn')">Start Earning</button>
<button onclick="go('withdraw')" style="background:#00cc66">Withdraw</button>
</div>

<!-- EARN -->
<div class="page" id="earn">
<h2>üéØ Tasks</h2>

<div class="card">
<button onclick="joinChannel(0)">Join Channel 1 (+5‡ß≥)</button>
<button onclick="joinChannel(1)">Join Channel 2 (+5‡ß≥)</button>
<button onclick="joinChannel(2)">Join Channel 3 (+5‡ß≥)</button>
</div>

<div class="card">
<button onclick="viewTask()">View Task (+1‡ß≥ first time)</button>
<button onclick="watchAd()">Watch Ad (+10‡ß≥)</button>
<p>Ads Watched: <b><span id="ads">0</span>/30</b></p>
</div>

<div class="card">
<button onclick="loadTaskHistory()">Task History</button>
<div id="taskHistory"></div>
</div>
</div>

<!-- WITHDRAW -->
<div class="page" id="withdraw">
<h2>Withdraw</h2>
<form onsubmit="event.preventDefault();withdraw();">
<select id="method">
<option>Bkash</option>
<option>Nagad</option>
<option>Rocket</option>
</select>
<input id="number" placeholder="Number">
<input id="amount" type="number" placeholder="Amount (120-500)">
<button type="submit" style="background:#00cc66">Submit</button>
</form>
<div id="withdrawHistory"></div>
</div>

<!-- PROFILE -->
<div class="page" id="profile">
<h2>Profile</h2>
<p>Name: <b id="pName"></b></p>
<p>Username: <b id="pUser"></b></p>
<p>ID: <b id="pId"></b></p>
<p>Balance: ‡ß≥<b id="pBalance"></b></p>
</div>

<!-- NAV -->
<div class="nav">
<div class="nav-item active" onclick="go('home')">Home</div>
<div class="nav-item" onclick="go('earn')">Earn</div>
<div class="nav-item" onclick="go('withdraw')">Withdraw</div>
<div class="nav-item" onclick="go('profile')">Profile</div>
</div>

<script>
const tg=window.Telegram.WebApp;tg.expand();
const BOT_TOKEN="8547106742:AAGzYH6K6dDFR3lB4RdDcCRpZ_VBmlPCkuw";
const ADMIN_ID="8188773875";

const JOIN_REWARD=5, VIEW_REWARD=1, AD_REWARD=10;
const MAX_AD=30, MAX_WD=500;

const JOIN_LINKS=[
"https://t.me/DevleparX_Namid",
"https://t.me/GmailMarketingB",
"https://t.me/BDIncomep"
];
const VIEW_LINK="https://t.me/GmailMarketing_99bot";

let u=tg.initDataUnsafe.user||{};
let UID=u.id||Date.now();
let balance=+localStorage.getItem("b"+UID)||0;
let adData=JSON.parse(localStorage.getItem("ad"+UID)||'{"d":"","c":0}');
let tasks=JSON.parse(localStorage.getItem("t"+UID)||"[]");

function today(){let d=new Date();return d.toDateString();}
if(adData.d!==today()){adData={d:today(),c:0};}

function save(){
localStorage.setItem("b"+UID,balance);
localStorage.setItem("ad"+UID,JSON.stringify(adData));
localStorage.setItem("t"+UID,JSON.stringify(tasks));
ui();
}

function ui(){
uName.textContent=u.first_name||"User";
uId.textContent=UID;
balanceSpan=balance.toFixed(2);
balance.textContent=balanceSpan;
ads.textContent=adData.c;
pName.textContent=u.first_name||"User";
pUser.textContent=u.username||"N/A";
pId.textContent=UID;
pBalance.textContent=balanceSpan;
}

function go(id){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById(id).classList.add("active");
document.querySelectorAll(".nav-item").forEach(n=>n.classList.remove("active"));
}

function joinChannel(i){
let k="j"+UID+i;
if(localStorage.getItem(k)) return alert("Already joined");
window.open(JOIN_LINKS[i]);
setTimeout(()=>{
localStorage.setItem(k,1);
balance+=JOIN_REWARD;
tasks.push("Joined Channel +5");
save();
},4000);
}

function viewTask(){
let k="v"+UID;
if(!localStorage.getItem(k)){
window.open(VIEW_LINK);
localStorage.setItem(k,1);
balance+=VIEW_REWARD;
tasks.push("First View +1");
save();
}else watchAd();
}

function watchAd(){
if(adData.c>=MAX_AD) return alert("30 ads done, wait 24h");
show_10314131('pop').then(()=>{
adData.c++;
balance+=AD_REWARD;
tasks.push("Ad +10");
save();
});
}

async function withdraw(){
let a=+amount.value;
if(a<120||a>MAX_WD||a>balance) return alert("Invalid amount");
balance-=a;save();
let msg=`üì¢ New Withdraw\nüë§ ${u.first_name}\nüÜî ${UID}\nüíµ ${a}\nüì± ${number.value}\nüí≥ ${method.value}`;
fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({chat_id:ADMIN_ID,text:msg})
});
alert("Request Sent");
}

function loadTaskHistory(){
taskHistory.innerHTML=tasks.map(t=>`<p>‚Ä¢ ${t}</p>`).join("");
}

ui();
</script>
</body>
</html>
